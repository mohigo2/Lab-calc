# 修正版機能テスト

両方の重要機能の両立テストを行います。

## 修正内容
1. **`isEditableMode()` をシンプル版に修正** - 複雑なロジックを排除
2. **`disableInputsForReadingMode()` でタイトル領域を除外** - `.closest()` を使用
3. **数値入力のソース反映機能を維持**

## テスト項目

### 1. タイトル編集機能
```buffer
name: タイトル編集テスト
totalVolume: 1000
volumeUnit: mL
components:
  - name: Tris-HCl
    stockConc: 1
    stockUnit: M
    finalConc: 50
    finalUnit: mM
```

**ライブプレビューモード時:**
- [ ] タイトルにペンアイコン（編集ボタン）が表示される
- [ ] 編集ボタンクリックで入力フィールドが表示される
- [ ] タイトル変更が可能
- [ ] 変更がソースコードに即座に反映される

**リーディングモード時:**
- [ ] タイトルに🔒アイコンが表示される
- [ ] 編集ボタンが表示されない
- [ ] タイトルクリックしても編集モードにならない

### 2. 数値入力のソース反映
**ライブプレビューモード時:**
- [ ] 総体積を変更 → ソースに反映
- [ ] 体積単位を変更 → ソースに反映  
- [ ] 成分の濃度を変更 → ソースに反映
- [ ] 成分の単位を変更 → ソースに反映

**リーディングモード時:**
- [ ] 数値入力フィールドが無効化（グレーアウト）
- [ ] セレクト要素が無効化
- [ ] ボタンが無効化

### 3. 入力無効化の精密動作
**リーディングモード時:**
- [ ] タイトル部分は無効化されない（条件分岐で制御）
- [ ] フォーム部分のみが正確に無効化される
- [ ] 「🔒 読み取り専用モード」表示が出る

## ストック溶液計算テスト

```stock
name: ストック修正テスト
reagentName: NaCl
molecularWeight: 58.44
targetConcentration: 100
concentrationUnit: mM
volume: 10
volumeUnit: mL
```

**期待される動作:**
- [ ] ライブプレビュー：タイトル編集可能、数値入力ソース反映
- [ ] リーディング：タイトル🔒表示、フォーム無効化

## デバッグ情報確認

F12コンソールで以下を確認：

**期待されるログ（リーディングモード）:**
```
Error detecting editable mode: [エラーなし]
[Buffer Calculator] - isEditable: false
🔒 Creating readonly title for buffer
🔒 Disabled input elements for reading mode (title area preserved)
```

**期待されるログ（ライブプレビューモード）:**
```
Error detecting editable mode: [エラーなし]  
[Buffer Calculator] - isEditable: true
📝 Creating editable title for buffer
```

## 成功基準

✅ **タイトル編集機能の復活**
✅ **数値入力ソース反映の維持**
✅ **リーディングモード制限の正確な動作**

全ての機能が正常に動作することを確認してください！