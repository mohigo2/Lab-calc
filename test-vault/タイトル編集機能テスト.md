# タイトル編集機能テスト

このファイルでタイトル編集機能が正しく動作するかテストしてください。

## 修正内容
- `disableInputsForReadingMode()`でタイトル領域の入力要素を除外
- 編集可能モードでは正常にタイトル編集が可能
- リーディングモードでは計算フォーム部分のみ無効化

## テスト手順

1. **F12でDeveloper Consoleを開く** - デバッグログを確認
2. **ライブプレビューモードで開く** → タイトル編集機能を確認
3. **リーディングモードに切り替える** → タイトル表示のみで編集不可を確認
4. **各モードでの動作を詳細確認**

## バッファー計算テスト

```buffer
name: タイトル編集テスト
totalVolume: 1000
volumeUnit: mL
components:
  - name: Tris-HCl
    stockConc: 1
    stockUnit: M
    finalConc: 50
    finalUnit: mM
```

### ライブプレビューモード時の期待動作
- ✅ タイトル部分にペンアイコン（編集ボタン）が表示される
- ✅ 編集ボタンをクリックするとタイトル入力フィールドが表示される
- ✅ タイトル変更後、保存・キャンセルボタンが正常動作
- ✅ 変更がリアルタイムでソースコードに反映される
- ✅ フォーム部分も正常に編集可能

### リーディングモード時の期待動作
- ✅ タイトルに🔒アイコンが表示される
- ✅ タイトル部分には編集ボタンが表示されない
- ✅ タイトルがクリックできない（読み取り専用）
- ✅ フォーム部分が無効化される（グレーアウト）
- ✅ 「🔒 読み取り専用モード」の表示が出る

## ストック溶液計算テスト

```stock
name: ストックタイトルテスト
reagentName: NaCl
molecularWeight: 58.44
targetConcentration: 100
concentrationUnit: mM
volume: 10
volumeUnit: mL
```

### 期待動作（ストック）
**ライブプレビューモード**
- ✅ タイトル編集機能が正常動作
- ✅ 「ストックタイトルテスト」→変更可能

**リーディングモード**
- ✅ タイトル表示のみ（🔒アイコン付き）
- ✅ フォーム部分が無効化

## 希釈計算テスト

```dilution
name: 希釈タイトルテスト
stockConcentration: 1000
stockConcentrationUnit: mM
finalConcentration: 100
finalConcentrationUnit: mM
finalVolume: 100
volumeUnit: µL
```

### 期待動作（希釈）
**ライブプレビューモード**
- ✅ タイトル編集機能が正常動作
- ✅ 「希釈タイトルテスト」→変更可能

**リーディングモード**
- ✅ タイトル表示のみ（🔒アイコン付き）
- ✅ フォーム部分が無効化

## 段階希釈計算テスト

```serial-dilution
name: 段階希釈タイトルテスト
stockConcentration: 10
stockUnit: mM
cellVolume: 200
cellVolumeUnit: µL
additionVolume: 2
additionVolumeUnit: µL
dilutionVolume: 200
dilutionVolumeUnit: µL
targetConcentrations: [100, 10, 1, 0.1]
targetUnit: µM
targetInputMode: exponential
stepDisplayFormat: text
```

### 期待動作（段階希釈）
**ライブプレビューモード**
- ✅ タイトル編集機能が正常動作
- ✅ 「段階希釈タイトルテスト」→変更可能

**リーディングモード**
- ✅ タイトル表示のみ（🔒アイコン付き）
- ✅ フォーム部分が無効化

## コンソールログ確認

### 修正後の期待ログ
```
=== Mode Detection Debug ===
🔍 Current view mode: preview
👀 Preview mode detected - checking submode...
🌐 DOM structure analysis:
   - Has .markdown-preview-view: true
   - Has .cm-editor: false
🔴 Reading mode detected (pure preview, no editor) - not editable
🔒 Disabled [数字] input elements for reading mode (title area preserved)
```

**重要なポイント**: `(title area preserved)`のメッセージが表示される

## 動作確認チェックリスト

### ライブプレビューモード
- [ ] タイトル編集ボタン（ペンアイコン）が表示される
- [ ] タイトル編集ボタンをクリックすると入力フィールドが表示される
- [ ] タイトル変更が可能
- [ ] 保存・キャンセルボタンが正常動作
- [ ] 変更がソースコードに即座に反映される
- [ ] フォーム部分も通常通り編集可能

### リーディングモード
- [ ] タイトルに🔒アイコンが表示される
- [ ] タイトル編集ボタンが表示されない
- [ ] タイトルをクリックしても編集モードにならない
- [ ] フォーム部分がグレーアウトして無効化される
- [ ] 「🔒 読み取り専用モード」の表示が出る
- [ ] ボタン類がクリックできない

## 修正検証

✅ **修正前の問題**: `disableInputsForReadingMode()`が全ての入力要素を無効化
✅ **修正後の動作**: タイトル領域は除外し、フォーム部分のみ無効化
✅ **期待結果**: 編集可能モードでタイトル編集機能が復活

これでタイトル編集機能とリーディングモード制限が両立できるはずです！