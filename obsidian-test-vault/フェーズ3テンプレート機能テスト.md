# フェーズ3 テンプレート機能テスト

## テスト1: 基本的なテンプレート選択

コマンドパレット（Cmd+P）から「Insert Recipe from Template」を実行してテンプレート選択モーダルが開くかテスト：

- [x] コマンドが存在するか
- [x] モーダルが正しく開くか
- [x] 日本語UI表示が正しいか
- [x] 8つの内蔵テンプレートが表示されるか

## テスト2: フィルタリング機能

### カテゴリーフィルター
- [ ] 「一般的なバッファー」で2つのPBSテンプレートが表示される
- [ ] 「タンパク質バッファー」でTris-HClテンプレートが表示される
- [ ] 「細胞培養」でHEPESテンプレートが表示される

### タイプフィルター
- [ ] 「バッファー」で5つのバッファーテンプレートが表示される
- [ ] 「ストック溶液」で2つのストックテンプレートが表示される
- [ ] 「希釈計算」で1つの希釈テンプレートが表示される

### 検索機能
- [ ] 「PBS」で検索すると2つのPBSテンプレートが表示される
- [ ] 「Tris」で検索すると該当テンプレートが表示される
- [ ] 「細胞培養」で検索すると該当テンプレートが表示される

## テスト3: テンプレート挿入

### 1× PBS（標準）テンプレートのテスト
「1× PBS（標準）」テンプレートを選択して「使用する」ボタンをクリック：

期待結果：
```buffer
name: 1× PBS
totalVolume: 1000
volumeUnit: mL
components:
  - name: NaCl
    stockConc: 5
    stockUnit: M
    finalConc: 137
    finalUnit: mM
  - name: KCl
    stockConc: 1
    stockUnit: M
    finalConc: 2.7
    finalUnit: mM
  - name: Na2HPO4
    stockConc: 1
    stockUnit: M
    finalConc: 10
    finalUnit: mM
  - name: KH2PO4
    stockConc: 1
    stockUnit: M
    finalConc: 1.8
    finalUnit: mM
notes: pH 7.4, 浸透圧 ~300 mOsm
```

### ストック溶液テンプレートのテスト
「1M Tris-HCl ストック」テンプレートを選択：

期待結果：
```stock
name: 1M Tris-HCl ストック
reagentName: Tris-HCl
molecularWeight: 157.6
targetConcentration: 1
concentrationUnit: M
volume: 100
volumeUnit: mL
purity: 99
solvent: 蒸留水
notes: pH 7.5-8.0に調整
```

### 希釈テンプレートのテスト
「タンパク質標準希釈系列」テンプレートを選択：

期待結果：
```dilution
name: BSA標準希釈
stockConcentration: 2
stockConcentrationUnit: mg/mL
finalConcentration: 100
finalConcentrationUnit: µg/mL
finalVolume: 1
volumeUnit: mL
notes: タンパク質定量用標準溶液
```

## テスト4: プレビュー機能

各テンプレートで「プレビュー」ボタンをクリックして：
- [ ] プレビューモーダルが正しく開く
- [ ] テンプレート情報が正しく表示される
- [ ] YAML内容が正しく表示される
- [ ] 日本語UI表示が正しい

## テスト5: 挿入されたコードブロックの動作確認

テンプレートから挿入されたコードブロックが：
- [ ] 正しく解析される
- [ ] 計算UI が正しく表示される
- [ ] 計算結果が正しく出力される
- [ ] エラーが発生しない

## テスト6: エラーハンドリング

- [ ] 無効なテンプレートでもクラッシュしない
- [ ] 空のテンプレートが適切に処理される
- [ ] ネットワークエラーなどで適切にフォールバック

---

## テスト実行後の確認項目

✅ **成功項目**
- [x] コマンドが正しく登録され実行できる
- [x] テンプレートモーダルが正しく開く
- [x] 8つの内蔵テンプレートが正しく表示される
- [x] 日本語UIが正しく表示される
- [x] カテゴリー分類が正しく機能する

❌ **修正が必要な項目**
- [ ] 具体的なフィルタリング機能
- [ ] テンプレート挿入機能
- [ ] 挿入されたコードブロックの動作

📝 **今後の改善点**
- [ ] ユーザーカスタムテンプレートの追加機能
- [ ] テンプレートの編集機能
- [ ] テンプレートのエクスポート/インポート機能